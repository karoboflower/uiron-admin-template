(function(y,o,E){"use strict";var g;(function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"})(g||(g={}));var m;(function(e){e.JSON="application/json;charset=UTF-8",e.FORM_URLENCODED="application/x-www-form-urlencoded;charset=UTF-8",e.FORM_DATA="multipart/form-data;charset=UTF-8"})(m||(m={}));var c=function(){return c=Object.assign||function(r){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},c.apply(this,arguments)};typeof SuppressedError=="function"&&SuppressedError;var b=function(e,r){return!e||!e.length||!r?!1:e.some(function(t){return t.includes(r)})};function T(e,r){e===void 0&&(e={}),r===void 0&&(r={});var t;for(t in r)e[t]=O(e[t])?T(e[t],r[t]):e[t]=r[t];return e}function O(e){return e!==null&&k(e,"Object")}function k(e,r){return toString.call(e)==="[object ".concat(r,"]")}function w(e){return k(e,"String")}function f(e){return typeof e=="function"}var d=new Map,x=function(e){return[e.method,e.url].join("&")},R=function(){function e(){}return e.prototype.addPending=function(r){this.removePending(r);var t=x(r);r.cancelToken=r.cancelToken||new E.CancelToken(function(n){d.has(t)||d.set(t,n)})},e.prototype.removeAllPending=function(){d.forEach(function(r){r&&f(r)&&r()}),d.clear()},e.prototype.removePending=function(r){var t=x(r);if(d.has(t)){var n=d.get(t);n&&n(t),d.delete(t)}},e.prototype.reset=function(){d=new Map},e}(),_=function(){function e(r){this.options=r,this.axiosInstance=E.create(r),this.setupInterceptors()}return e.prototype.createAxios=function(r){this.axiosInstance=E.create(r)},e.prototype.getTransform=function(){var r=this.options.transform;return r},e.prototype.getAxios=function(){return this.axiosInstance},e.prototype.configAxios=function(r){this.axiosInstance&&this.createAxios(r)},e.prototype.setHeader=function(r){this.axiosInstance&&Object.assign(this.axiosInstance.defaults.headers,r)},e.prototype.setupInterceptors=function(){var r=this,t=this.getTransform();if(t){var n=t.requestInterceptors,s=t.requestInterceptorsCatch,i=t.responseInterceptors,u=t.responseInterceptorsCatch,p=new R;this.axiosInstance.interceptors.request.use(function(a){return n&&f(n)&&(a=n(a,r.options)),a},void 0),s&&f(s)&&this.axiosInstance.interceptors.request.use(void 0,s),this.axiosInstance.interceptors.response.use(function(a){return a&&p.removePending(a.config),i&&f(i)&&(a=i(a)),a},void 0),u&&f(u)&&this.axiosInstance.interceptors.response.use(void 0,u)}},e.prototype.supportFormData=function(r){var t,n=r.headers||this.options.headers,s=n?.["Content-Type"]||n?.["content-type"];return s!==m.FORM_URLENCODED||!Reflect.has(r,"data")||((t=r.method)===null||t===void 0?void 0:t.toUpperCase())===g.GET?r:c(c({},r),{data:c({},r.data)})},e.prototype.get=function(r,t){return this.request(c(c({},r),{method:"GET"}),t)},e.prototype.post=function(r,t){return this.request(c(c({},r),{method:"POST"}),t)},e.prototype.put=function(r,t){return this.request(c(c({},r),{method:"PUT"}),t)},e.prototype.delete=function(r,t){return this.request(c(c({},r),{method:"DELETE"}),t)},e.prototype.request=function(r,t){var n=this,s=T(r),i=this.getTransform(),u=this.options.requestOptions,p=Object.assign({},u,t),a=i||{},h=a.beforeRequestHook,v=a.requestCatchHook,I=a.transformRequestHook;return h&&f(h)&&(s=h(s,p)),s.requestOptions=p,s=this.supportFormData(s),new Promise(function(q,M){n.axiosInstance.request(s).then(function(l){if(I&&f(I)){try{var S=I(l,p);q(S)}catch(D){M(D||new Error("request error!"))}return}q(l)}).catch(function(l){if(v&&f(v)){M(v(l,p));return}M(l)})})},e}();function j(e,r){var t,n;if(e){if(console.log("\u9519\u8BEF\u54CD\u5E94response: ",e),console.log("\u9519\u8BEF\u4FE1\u606Fmessage: ",r),e.data instanceof Blob){if(e.headers["content-type"].includes("json")){var s=new FileReader;s.readAsText(e.data),s.onload=function(){var a=s.result,h=JSON.parse(a),v=h.msg;o.ElMessage.error("".concat(v))}}return}var i=e.data,u=i.code,p=i.msg;if(u)switch((t=e.data)===null||t===void 0?void 0:t.code){case 1701:o.ElMessage.error("\u4E32\u53E3\u901A\u4FE1\u8D85\u65F6");return;case 1702:o.ElMessage.error("\u4E32\u53E3\u5FD9");return;case 1703:o.ElMessage.error("\u4E32\u53E3\u8BF7\u6C42\u6570\u636E\u9519\u8BEF");return;case 1705:o.ElMessage.error("\u9501\u72B6\u6001\u9519\u8BEF");return;case 1706:o.ElMessage.error("mqtt\u6D88\u606F\u8FC7\u671F");return;case 1707:o.ElMessage.error("\u4E32\u53E3\u6548\u9A8C\u6570\u636E\u9519\u8BEF");return;default:o.ElMessage.error("".concat(u,"  ").concat(p));return}if(console.log("\u9519\u8BEF\u54CD\u5E94response: ",e.data),!((n=e.data)===null||n===void 0)&&n.msg){o.ElMessage.error(e.data.msg);return}switch(e.status){case 400:o.ElMessage.error("400\uFF1A\u8BF7\u6C42\u9519\u8BEF");break;case 401:o.ElMessage.error("token\u5DF2\u5931\u6548,\u8BF7\u91CD\u65B0\u767B\u5F55"),window.location.reload();break;case 403:o.ElMessage.error("\u5F53\u524D\u8D26\u53F7\u65E0\u6743\u9650\u8BBF\u95EE\uFF01");break;case 404:o.ElMessage.error("\u4F60\u6240\u8BBF\u95EE\u7684\u8D44\u6E90\u4E0D\u5B58\u5728\uFF01");break;case 405:o.ElMessage.error("\u8BF7\u6C42\u65B9\u5F0F\u9519\u8BEF\uFF01\u8BF7\u60A8\u7A0D\u540E\u91CD\u8BD5");break;case 408:o.ElMessage.error("\u8BF7\u6C42\u8D85\u65F6\uFF01\u8BF7\u60A8\u7A0D\u540E\u91CD\u8BD5");break;case 500:o.ElMessage.error("\u670D\u52A1\u5668\u5F02\u5E38\uFF01");break;case 502:o.ElMessage.error("\u7F51\u5173\u9519\u8BEF\uFF01");break;case 503:o.ElMessage.error("\u670D\u52A1\u4E0D\u53EF\u7528\uFF01");break;case 504:o.ElMessage.error("\u7F51\u5173\u8D85\u65F6\uFF01");break}}}function C(e,r){if(!e)return r?"":{};var t=new Date().getTime();return{_t:t}}var U={transformRequestHook:function(e,r){var t=r.isReturnNativeResponse;if(t)return e;var n=e.data;return n.result||n.data||n},beforeRequestHook:function(e,r){var t,n=r.apiUrl,s=r.joinPrefix,i=r.urlPrefix,u=r.joinTime,p=u===void 0?!0:u;s&&(e.url="".concat(i).concat(e.url)),n&&w(n)&&(e.url="".concat(n).concat(e.url));var a=e.params||e.data||{};return((t=e.method)===null||t===void 0?void 0:t.toUpperCase())===g.GET&&(a=Object.assign(a||{},C(p,!1)),e.data=a,e.params=void 0),e},requestInterceptors:function(e,r){var t=r?.requestOptions||{},n=t.whiteList,s=n===void 0?[]:n,i=t.setToken,u=i===void 0?"":i,p=t.appId;if(!b(s,e.url)){var a=u&&u(e);return a}return p&&(e.headers["Xi-App-Id"]=p),e},responseInterceptors:function(e){return e},responseInterceptorsCatch:function(e){var r=e||{},t=r.response,n=r.message;return j(t,n),!t&&e.message==="timeout of 30000ms exceeded"&&o.ElMessage.error("\u670D\u52A1\u5668\u54CD\u5E94\u8D85\u65F6"),E.isCancel(e)?o.ElMessage.error("\u8BF7\u6C42\u5DF2\u53D6\u6D88"):t||o.ElMessage.error(e.message),Promise.reject(e)}};function A(e){return new _(T({timeout:30*1e3,headers:{"Content-Type":m.JSON},transform:U,requestOptions:{appId:"",whiteList:[],joinPrefix:!0,isReturnNativeResponse:!1,isTransformResponse:!0,joinParamsToUrl:!1,formatDate:!0,joinTime:!1,urlPrefix:"",apiUrl:"",ignoreCancelToken:!0,mock:!1}},e||{}))}y.uironRequest=A})(this.VueUse=this.VueUse||{},elementPlus,axios);
